fragment CanvasDetails on Canvas {
  ...CanvasSummary
  authorization {
    id
    myPrivileges
    anonymousReadAccess
  }
  checkout {
    ...ChechkoutDetails
  }
}

fragment CanvasSummary on Canvas {
  id
  displayName
  isTemplate
}

fragment CanvasValue on Canvas {
  id
  value
}

fragment ChechkoutDetails on CanvasCheckout {
  id
  lockedBy
  status
  lifecycle {
    id
    nextEvents
  }
  authorization {
    id
    myPrivileges
  }
}

query hubCanvases($hubId: UUID_NAMEID!) {
  hub(ID: $hubId) {
    id
    context {
      id
      canvases {
        ...CanvasDetails
      }
    }
  }
}

query hubCanvasValues($hubId: UUID_NAMEID!, $canvasId: UUID!) {
  hub(ID: $hubId) {
    id
    context {
      id
      canvases(IDs: [$canvasId]) {
        ...CanvasDetails
        ...CanvasValue
      }
    }
  }
}

query challengeCanvases($hubId: UUID_NAMEID!, $challengeId: UUID_NAMEID!) {
  hub(ID: $hubId) {
    id
    challenge(ID: $challengeId) {
      id
      context {
        id
        canvases {
          ...CanvasDetails
        }
      }
    }
  }
}

query challengeCanvasValues($hubId: UUID_NAMEID!, $challengeId: UUID_NAMEID!, $canvasId: UUID!) {
  hub(ID: $hubId) {
    id
    challenge(ID: $challengeId) {
      id
      context {
        id
        canvases(IDs: [$canvasId]) {
          ...CanvasDetails
          ...CanvasValue
        }
      }
    }
  }
}

query opportunityCanvases($hubId: UUID_NAMEID!, $opportunityId: UUID_NAMEID!) {
  hub(ID: $hubId) {
    id
    opportunity(ID: $opportunityId) {
      id
      context {
        id
        canvases {
          ...CanvasDetails
        }
      }
    }
  }
}

query opportunityCanvasValues($hubId: UUID_NAMEID!, $opportunityId: UUID_NAMEID!, $canvasId: UUID!) {
  hub(ID: $hubId) {
    id
    opportunity(ID: $opportunityId) {
      id
      context {
        id
        canvases(IDs: [$canvasId]) {
          ...CanvasDetails
          ...CanvasValue
        }
      }
    }
  }
}

mutation createCanvasOnContext($input: CreateCanvasOnContextInput!) {
  createCanvasOnContext(canvasData: $input) {
    ...CanvasDetails
  }
}

mutation deleteCanvasOnContext($input: DeleteCanvasOnContextInput!) {
  deleteCanvasOnContext(deleteData: $input) {
    ...CanvasSummary
  }
}

mutation updateCanvasOnContext($input: UpdateCanvasDirectInput!) {
  updateCanvas(canvasData: $input) {
    id
    value
    displayName
    isTemplate
  }
}

mutation checkoutCanvasOnContext($input: CanvasCheckoutEventInput!) {
  eventOnCanvasCheckout(canvasCheckoutEventData: $input) {
    ...ChechkoutDetails
  }
}

subscription canvasContentUpdated {
  canvasContentUpdated {
    canvasID
    value
  }
}
