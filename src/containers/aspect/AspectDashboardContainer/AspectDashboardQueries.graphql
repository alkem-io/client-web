query HubAspect($hubNameId: UUID_NAMEID!, $aspectNameId: UUID_NAMEID!) {
  hub(ID: $hubNameId) {
    id
    context {
      ...AspectDashboardData
    }
  }
}

query ChallengeAspect($hubNameId: UUID_NAMEID!, $challengeNameId: UUID_NAMEID!, $aspectNameId: UUID_NAMEID!) {
  hub(ID: $hubNameId) {
    id
    challenge(ID: $challengeNameId) {
      id
      context {
        ...AspectDashboardData
      }
    }
  }
}

query OpportunityAspect($hubNameId: UUID_NAMEID!, $opportunityNameId: UUID_NAMEID!, $aspectNameId: UUID_NAMEID!) {
  hub(ID: $hubNameId) {
    id
    opportunity(ID: $opportunityNameId) {
      id
      context {
        ...AspectDashboardData
      }
    }
  }
}

fragment AspectDashboardData on Context {
  id
  authorization {
    id
    myPrivileges
  }
  aspects(IDs: [$aspectNameId]) {
    ...AspectDashboard
  }
}

fragment AspectDashboard on Aspect {
  id
  type
  displayName
  description
  createdBy
  createdDate
  banner {
    ...VisualUri
  }
  tagset {
    id
    name
    tags
  }
  references {
    id
    name
    uri
    description
  }
  comments {
    id
    authorization {
      id
      myPrivileges
    }
    messages {
      ...AspectMessage
    }
  }
}

fragment AspectMessage on Message {
  id
  message
  sender
  timestamp
}

query AspectCreator($userId: UUID_NAMEID_EMAIL!) {
  user(ID: $userId) {
    id
    displayName
    profile {
      id
      avatar {
        id
        uri
      }
    }
  }
}
