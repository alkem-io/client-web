query PendingMembershipsSpace($spaceId: UUID_NAMEID!, $fetchDetails: Boolean! = false, $visualType: VisualType!) {
  space(ID: $spaceId) {
    id
    nameID
    profile {
      ...PendingMembershipsJourneyProfile
    }
  }
}

query PendingMembershipsChallenge(
  $spaceId: UUID_NAMEID!
  $challengeId: UUID_NAMEID!
  $fetchDetails: Boolean! = false
  $visualType: VisualType!
) {
  space(ID: $spaceId) {
    id
    nameID
    challenge(ID: $challengeId) {
      id
      nameID
      profile {
        ...PendingMembershipsJourneyProfile
      }
    }
  }
}

query PendingMembershipsOpportunity(
  $spaceId: UUID_NAMEID!
  $opportunityId: UUID_NAMEID!
  $fetchDetails: Boolean! = false
  $visualType: VisualType!
) {
  space(ID: $spaceId) {
    id
    nameID
    opportunity(ID: $opportunityId) {
      id
      nameID
      parentNameID
      profile {
        ...PendingMembershipsJourneyProfile
      }
    }
  }
}

query PendingMembershipsUser($userId: UUID_NAMEID_EMAIL!) {
  user(ID: $userId) {
    id
    profile {
      id
      displayName
    }
  }
}

fragment PendingMembershipsJourneyProfile on Profile {
  id
  displayName
  visual(type: $visualType) {
    id
    uri
  }
  ... on Profile @include(if: $fetchDetails) {
    tagline
    tagset {
      id
      tags
    }
  }
}

fragment PendingMembershipsMemberships on Community {
  id
  applications {
    id
  }
  invitations {
    ...PendingMembershipInvitation
  }
}

fragment PendingMembershipInvitation on Invitation {
  id
  welcomeMessage
  createdBy {
    id
    profile {
      id
      displayName
    }
  }
}
