query InnovationFlowSettings($collaborationId: UUID!) {
  lookup {
    collaboration(ID: $collaborationId) {
      innovationFlow {
        ...InnovationFlowDetails
      }
      ...InnovationFlowCollaboration
    }
  }
}

query InnovationFlowDetails(
  $collaborationId: UUID! = "mockid"
  $innovationFlowId: UUID! = "mockid"
  $includeCollaboration: Boolean = false
  $includeInnovationFlow: Boolean = false
) {
  lookup {
    collaboration(ID: $collaborationId) @include(if: $includeCollaboration) {
      innovationFlow {
        ...InnovationFlowDetails
      }
    }
    innovationFlow(ID: $innovationFlowId) @include(if: $includeInnovationFlow) {
      ...InnovationFlowDetails
    }
  }
}

fragment InnovationFlowDetails on InnovationFlow {
  id
  profile {
    ...InnovationFlowProfile
  }
  states {
    displayName
    description
  }
  currentState {
    displayName
  }
  authorization {
    id
    myPrivileges
  }
}

fragment InnovationFlowProfile on Profile {
  id
  displayName
  description
  # tags: tagset {
  #   ...TagsetDetails
  # }
  tagsets {
    ...TagsetDetails
  }
  references {
    id
    name
    description
    uri
  }
  bannerNarrow: visual(type: CARD) {
    ...VisualFull
  }
}

fragment InnovationFlowCollaboration on Collaboration {
  id
  authorization {
    id
    myPrivileges
  }
  callouts(displayLocations: [CONTRIBUTE_LEFT, CONTRIBUTE_RIGHT]) {
    id
    nameID
    type
    activity
    sortOrder
    framing {
      profile {
        id
        displayName
        flowState: tagset(tagsetName: FLOW_STATE) {
          ...TagsetDetails
        }
      }
    }
  }
}

mutation UpdateInnovationFlow($updateInnovationFlowData: UpdateInnovationFlowInput!) {
  updateInnovationFlow(innovationFlowData: $updateInnovationFlowData) {
    id
  }
}

mutation UpdateCalloutFlowState($calloutId: UUID!, $flowStateTagsetId: UUID!, $value: String!) {
  updateCallout(
    calloutData: { ID: $calloutId, framing: { profile: { tagsets: [{ ID: $flowStateTagsetId, tags: [$value] }] } } }
  ) {
    id
    sortOrder
    framing {
      profile {
        id
        flowState: tagset(tagsetName: FLOW_STATE) {
          ...TagsetDetails
        }
      }
    }
  }
}
