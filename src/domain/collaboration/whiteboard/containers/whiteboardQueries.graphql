fragment WhiteboardProfile on Profile {
  id
  displayName
  description
  visual(type: CARD) {
    ...VisualFull
  }
  preview: visual(type: BANNER) {
    ...VisualFull
  }
  tagset {
    ...TagsetDetails
  }
  storageBucket {
    id
  }
}

fragment WhiteboardDetails on Whiteboard {
  id
  nameID
  createdDate
  profile {
    ...WhiteboardProfile
  }
  authorization {
    id
    myPrivileges
    anonymousReadAccess
  }
  checkout {
    ...CheckoutDetails
  }
  createdBy {
    id
    profile {
      id
      displayName
      visual(type: AVATAR) {
        id
        uri
      }
    }
  }
}
fragment WhiteboardRtDetails on WhiteboardRt {
  id
  nameID
  createdDate
  profile {
    ...WhiteboardProfile
  }
  authorization {
    id
    myPrivileges
    anonymousReadAccess
  }
  createdBy {
    id
    profile {
      id
      displayName
      visual(type: AVATAR) {
        id
        uri
      }
    }
  }
}

fragment WhiteboardSummary on Whiteboard {
  id
  nameID
  createdDate
  profile {
    id
    displayName
  }
}

fragment WhiteboardContent on Whiteboard {
  id
  content
}

fragment WhiteboardRtContent on WhiteboardRt {
  id
  content
}

fragment CheckoutDetails on WhiteboardCheckout {
  id
  lockedBy
  status
  lifecycle {
    id
    nextEvents
  }
  authorization {
    id
    myPrivileges
  }
}

query whiteboardTemplates($spaceId: UUID_NAMEID!) {
  space(ID: $spaceId) {
    id
    templates {
      id
      whiteboardTemplates {
        ...CreateWhiteboardWhiteboardTemplate
      }
    }
  }
}

fragment CreateWhiteboardWhiteboardTemplate on WhiteboardTemplate {
  id
  profile {
    id
    displayName
    description
  }
  content
}

fragment CalloutWithWhiteboard on Callout {
  id
  nameID
  type
  authorization {
    id
    anonymousReadAccess
    myPrivileges
  }
  framing {
    whiteboard {
      ...WhiteboardDetails
    }
  }
  contributions(filter: { whiteboardIDs: [$whiteboardId] }) {
    whiteboard {
      ...WhiteboardDetails
    }
  }
}

fragment CalloutWithWhiteboardRt on Callout {
  id
  nameID
  type
  authorization {
    id
    anonymousReadAccess
    myPrivileges
  }
  framing {
    whiteboardRt {
      ...WhiteboardRtDetails
    }
  }
}

fragment CollaborationWithWhiteboardDetails on Collaboration {
  id
  callouts {
    id
    nameID
    type
    authorization {
      id
      anonymousReadAccess
      myPrivileges
    }
    contributions {
      whiteboard {
        ...WhiteboardDetails
      }
    }
    framing {
      whiteboardRt {
        ...WhiteboardRtDetails
      }
    }
  }
}

query WhiteboardFromCallout($calloutId: UUID!, $whiteboardId: UUID_NAMEID!) {
  lookup {
    callout(ID: $calloutId) {
      ...CalloutWithWhiteboard
    }
  }
}

query WhiteboardRtFromCallout($calloutId: UUID!) {
  lookup {
    callout(ID: $calloutId) {
      ...CalloutWithWhiteboardRt
    }
  }
}

query WhiteboardWithContent($whiteboardId: UUID!) {
  lookup {
    whiteboard(ID: $whiteboardId) {
      ...WhiteboardDetails
      ...WhiteboardContent
    }
  }
}

query whiteboardRtWithContent($whiteboardId: UUID!) {
  lookup {
    whiteboardRt(ID: $whiteboardId) {
      ...WhiteboardRtDetails
      ...WhiteboardRtContent
    }
  }
}

query whiteboardRtLastUpdatedDate($whiteboardId: UUID!) {
  lookup {
    whiteboardRt(ID: $whiteboardId) {
      id
      updatedDate
    }
  }
}

query platformTemplateWhiteboardContents($innovationPackId: UUID_NAMEID!, $whiteboardId: UUID!) {
  platform {
    id
    library {
      id
      innovationPack(ID: $innovationPackId) {
        templates {
          id
          whiteboardTemplate(ID: $whiteboardId) {
            id
            profile {
              ...WhiteboardProfile
            }
            content
          }
        }
      }
    }
  }
}

mutation createWhiteboardOnCallout($input: CreateContributionOnCalloutInput!) {
  createContributionOnCallout(contributionData: $input) {
    whiteboard {
      ...WhiteboardDetails
    }
  }
}

mutation deleteWhiteboard($input: DeleteWhiteboardInput!) {
  deleteWhiteboard(whiteboardData: $input) {
    id
  }
}

mutation updateWhiteboard($input: UpdateWhiteboardDirectInput!) {
  updateWhiteboard(whiteboardData: $input) {
    id
    content
    profile {
      id
      displayName
    }
  }
}

mutation updateWhiteboardRt($input: UpdateWhiteboardRtInput!) {
  updateWhiteboardRt(whiteboardData: $input) {
    id
    profile {
      id
      displayName
    }
  }
}

mutation updateWhiteboardContentRt($input: UpdateWhiteboardContentRtInput!) {
  updateWhiteboardContentRt(whiteboardData: $input) {
    id
    content
  }
}

mutation checkoutWhiteboard($input: WhiteboardCheckoutEventInput!) {
  eventOnWhiteboardCheckout(whiteboardCheckoutEventData: $input) {
    ...CheckoutDetails
  }
}

subscription whiteboardContentUpdated($whiteboardIDs: [UUID!]!) {
  whiteboardContentUpdated(whiteboardIDs: $whiteboardIDs) {
    whiteboardID
    content
  }
}
