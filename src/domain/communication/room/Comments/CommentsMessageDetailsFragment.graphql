fragment MessageDetails on Message {
  id
  message
  timestamp
  reactions {
    ...ReactionDetails
  }
  threadID
  sender {
    ... on User {
      id
      profile {
        ...SenderProfile
      }
    }
    ... on VirtualContributor {
      id
      profile {
        ...SenderProfile
      }
    }
  }
}

fragment SenderProfile on Profile {
  id
  displayName
  url
  type
  avatar: visual(type: AVATAR) {
    id
    uri
  }
  tagsets {
    ...TagsetDetails
  }
  location {
    id
    city
    country
  }
}

fragment ReactionDetails on Reaction {
  id
  emoji
  sender {
    id
    profile {
      id
      displayName
    }
  }
}
